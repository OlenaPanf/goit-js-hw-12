{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nexport const gallery = document.querySelector('.gallery');\nexport function renderGallery(images) {\n  const markup = images\n    .map(image => {\n      return `<li class=\"card\">\n   <a class=\"link\" href=\"${image.largeImageURL}\">\n     <img\n             src=\"${image.webformatURL}\"\n             alt=\"${image.tags}\"\n             width=\"360\"\n             height=\"200\"\n             class=\"gallery-img\"\n         />\n         <ul class=\"list-container\">\n         <li class=\"item-description\"><span class=\"gal-span\">Likes</span> ${image.likes}</li>\n         <li class=\"item-description\"><span class=\"gal-span\">Views</span> ${image.views}</li>\n         <li class=\"item-description\"><span class=\"gal-span\">Comments</span> ${image.comments}</li>\n         <li class=\"item-description\"><span class=\"gal-span\">Downloads</span> ${image.downloads}</li>\n      </ul>\n   </a>\n </li>`;\n    })\n    .join('');\n  gallery.insertAdjacentHTML('beforeend', markup);\n  lightbox.refresh();\n}\nconst lightbox = new SimpleLightbox('.link', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\nlightbox.refresh();\n","import axios from 'axios';\n\nexport async function getImage(query, currentPage) {\n  const url = 'https://pixabay.com/api/';\n  const params = {\n    key: '43098974-eee2e6d48134054f86f6d867e',\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    page: currentPage,\n    per_page: 15,\n  };\n\n  const response = await axios.get(url, { params });\n  return response.data;\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { getImage } from './js/pixabay-api';\nimport { renderGallery, gallery } from './js/render-functions';\n\n//====================================================\nconst formElem = document.querySelector('.form');\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.load-more-btn');\n//====================================================\nlet query;\nlet currentPage = 1;\nlet maxPage = 0;\nconst perPage = 15;\n//====================================================\nformElem.addEventListener('submit', onFormSubmit);\nasync function onFormSubmit(event) {\n  event.preventDefault();\n  hideLoadMore();\n  //showLoader();\n  query = formElem.elements.query.value.trim(); //отримую що ввів користувач\n  gallery.innerHTML = ''; //очищаю попередню розмітку. Навіть якщо її немає, видаляю все старе\n  currentPage = 1; // щоб при новому запиті завжди показувало спочатку першу сторінку\n\n  if (query === '') {\n    iziToast.error({\n      title: 'Error',\n      message: 'Please enter a search term',\n      color: 'red',\n      maxWidth: '432px',\n      height: '88px',\n      position: 'topRight',\n    });\n    hideLoader();\n    return;\n  }\n  try {\n    showLoader();\n    const data = await getImage(query, currentPage); //посилаю кур'єра за новими даними, чекаю кур'єра, коли кур'єр повертається з даними data\n    maxPage = Math.ceil(data.totalHits / perPage);\n    if (data.hits.length === 0) {\n      iziToast.error({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        theme: 'dark',\n        progressBarColor: '#FFFFFF',\n        color: '#EF4040',\n        position: 'topRight',\n      });\n    } else {\n      renderGallery(data.hits); //дані data відмальовую на сторінці\n      checkBtnStatus();\n    }\n  } catch (error) {\n    console.error('Error fetching images:', error);\n    iziToast.error({\n      title: 'Error',\n      message: 'Failed to fetch images. Please try again later.',\n      position: 'topRight',\n    });\n  }\n\n  hideLoader();\n  formElem.reset();\n}\n//=====================================================\nloadMoreBtn.addEventListener('click', onLoadMoreClick);\nasync function onLoadMoreClick() {\n  currentPage += 1;\n  hideLoadMore();\n  showLoader();\n  try {\n    const data = await getImage(query, currentPage); //посилаю кур'єра за новими даними, чекаю кур'єра, коли кур'єр повертається з даними data\n    renderGallery(data.hits); //дані data відмальовую на сторінці\n  } catch (error) {\n    console.error('Error fetching images:', error);\n    iziToast.error({\n      title: 'Error',\n      message: 'Failed to fetch images. Please try again later.',\n      position: 'topRight',\n    });\n  }\n\n  hideLoader();\n  myScroll();\n  checkBtnStatus();\n}\n//=====================================================\n\nfunction showLoadMore() {\n  loadMoreBtn.classList.remove('is-hidden');\n}\nfunction hideLoadMore() {\n  loadMoreBtn.classList.add('is-hidden');\n}\n\nfunction checkBtnStatus() {\n  if (currentPage >= maxPage) {\n    hideLoadMore();\n    iziToast.info({\n      message: \"We're sorry, but you've reached the end of search results.\",\n      theme: 'dark',\n      progressBarColor: '#FFFFFF',\n      color: 'blue',\n      position: 'topRight',\n    });\n  } else {\n    showLoadMore();\n  }\n}\n\nfunction showLoader() {\n  loader.classList.remove('is-hidden');\n}\nfunction hideLoader() {\n  loader.classList.add('is-hidden');\n}\n\n// ===================================================\nfunction myScroll() {\n  const height = gallery.firstChild.getBoundingClientRect().height;\n\n  scrollBy({\n    top: height,\n    behavior: 'smooth',\n  });\n}\n//====================================================\n"],"names":["gallery","renderGallery","images","markup","image","lightbox","SimpleLightbox","getImage","query","currentPage","url","params","axios","formElem","loader","loadMoreBtn","maxPage","perPage","onFormSubmit","event","hideLoadMore","iziToast","hideLoader","showLoader","data","checkBtnStatus","error","onLoadMoreClick","myScroll","showLoadMore","height"],"mappings":"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"}